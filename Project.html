<!DOCTYPE html>
<html>
<head>
  <title>Cuckoo Hashing</title>
  <style>
    table {
      border-collapse: collapse;
    }

    table, th, td {
      border: 1px solid black;
      padding: 20px;
    }
    .cuckoo{
        width: 100px;
        height: 100px;
        border-collapse: collapse;
        border:0;
        margin: none;
        border-style: hidden;
    
    }
  </style>
</head>
<body>
  <h1 style="text-align: center;">Cuckoo Hashing</h1>

  

  <div id="output"></div>
  <center>
<table class="cuckoo">
    <tr>
        <td class="cuckoo">
            <table>
                <caption>Hash Table 1</caption>
                <tr>
                  <th>Index</th>
                  <th>Key</th>
                </tr>
                <tbody id="table1"></tbody>
              </table>

        </td>
        <td class="cuckoo">
           
            <label for="key">Key:</label>
            <input type="text" id="key" />
            <button onclick="insert()">Insert</button>
            <button onclick="lookup()">Lookup</button>
            <button onclick="deleteKey()">Delete</button>
        </td>
        <td class="cuckoo">
            <table>
                <caption>Hash Table 2</caption>
                <tr>
                  <th>Index</th>
                  <th>Key</th>
                </tr>
                <tbody id="table2"></tbody>
              </table>

        </td>
    </tr>
</table>
</center>
  

 

  <script>
    // Cuckoo Hashing implementation
    let tableSize = 0;
    let table1 = [];
    let table2 = [];

    function initializeTables(size) {
      tableSize = size;
      table1 = new Array(tableSize).fill(null);
      table2 = new Array(tableSize).fill(null);
      updateTable("table1", table1);
      updateTable("table2", table2);
    }

    function hash1(key) {
      // Hash function 1
      return key % tableSize;
    }

    function hash2(key) {
      // Hash function 2
      return Math.floor(key / tableSize)  % tableSize;
    }

    function insert() {
      const key = parseInt(document.getElementById("key").value);
      let currentKey = key;
      let hashValue1 = hash1(currentKey);
      let hashValue2 = hash2(currentKey);

      for (let i = 0; i < tableSize; i++) {
        if (table1[hashValue1] === null) {
          table1[hashValue1] = currentKey;
          updateTable("table1", table1);
          output("Inserted key " + currentKey + " at index " + hashValue1 + " in table 1.");
          return;
        } else if (table2[hashValue2] === null) {
          table2[hashValue2] = currentKey;
          updateTable("table2", table2);
          output("Inserted key " + currentKey + " at index " + hashValue2 + " in table 2.");
          return;
        } 

        hashValue1 = hash1(currentKey);
        hashValue2 = hash2(currentKey);
      }

      output("Unable to insert key " + key + ". Maximum rehash attempts exceeded.");
    }

    function lookup() {
      const key = parseInt(document.getElementById("key").value);
      const hashValue1 = hash1(key);
      const hashValue2 = hash2(key);

      if (table1[hashValue1] === key) {
        output("Key " + key + " found at index " + hashValue1 + " in table 1.");
      } else if (table2[hashValue2] === key) {
        output("Key " + key + " found at index " + hashValue2 + " in table 2.");
      } else {
        output("Key " + key + " not found in the hash tables.");
      }
    }

    function deleteKey() {
      const key = parseInt(document.getElementById("key").value);
      const hashValue1 = hash1(key);
      const hashValue2 = hash2(key);

      if (table1[hashValue1] === key) {
        table1[hashValue1] = null;
        updateTable("table1", table1);
        output("Deleted key " + key + " from index " + hashValue1 + " in table 1.");
      } else if (table2[hashValue2] === key) {
        table2[hashValue2] = null;
        updateTable("table2", table2);
        output("Deleted key " + key + " from index " + hashValue2 + " in table 2.");
      } else {
        output("Key " + key + " not found in the hash tables.");
      }
    }

    function updateTable(tableId, table) {
      const tableBody = document.getElementById(tableId);
      tableBody.innerHTML = "";

      for (let i = 0; i < table.length; i++) {
        const row = document.createElement("tr");
        const indexCell = document.createElement("td");
        const keyCell = document.createElement("td");

        indexCell.innerText = i;
        keyCell.innerText = table[i] !== null ? table[i] : "-";

        row.appendChild(indexCell);
        row.appendChild(keyCell);

        tableBody.appendChild(row);
      }
    }

    function output(message) {
      const outputDiv = document.getElementById("output");
      outputDiv.innerHTML = message;
    }
  </script>

  <script>
    // Prompt user for table size and initialize the tables
    const inputTableSize = parseInt(prompt("Enter the table size:"));
    if (isNaN(inputTableSize) || inputTableSize <= 0) {
      alert("Invalid table size. Using default size of 10.");
      initializeTables(10);
    } else {
      initializeTables(inputTableSize);
    }
  </script>
</body>
</html>